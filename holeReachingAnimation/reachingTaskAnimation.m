%clear classes;
%close all;
%clear all
%load('/home/fcportugal/data/test/PlanarHoleReaching_localRepsOneContextDiffBandwidth/numSamples_201411151346_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_localRepsOneContextDiffDynamicBandwidth/numSamples_201411191621_01/eval001/trial001/trial.mat')

%load('/home/fcportugal/data/test/PlanarHoleReaching_StandardRepsOneSmallContext/numSamples_201411171130_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_localRepsOneContextDiffDynamicBandwidth/numSamples_201411191621_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_StandardRepsOneSmallContext/numSamples_201411171130_01/eval001/trial001/trial.mat')

%load('/home/fcportugal/data/test/PlanarHoleReaching_localRepsOneContextDiffDynamicBandwidth/numSamples_201411191621_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_localRepsOneContextDiffDynamicBandwidthTest/numSamples_201411191802_01/eval001/trial001/trial.mat')

%load('/home/fcportugal/data/test/PlanarHoleReaching_localRepsOneContextDiffDynamicBandwidth/numSamples_201411191621_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_StandardRepsOneSmallContext/numSamples_201411171130_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_StandardRepsOneSmallContext/numSamples_201411211946_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_localRepsOneContextDiffDynamicBandwidth/numSamples_201411211948_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_StandardRepsOneSmallContext/numSamples_201411271916_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_localRepsOneContextDiffDynamicBandwidth/numSamples_201411262023_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_StandardRepsOneSmallContext/numSamples_201411281838_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_LocalREPS/numSamples_201411241014_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_LocalREPS/numSamples_201411291056_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_localRepsOneContextDiffDynamicBandwidth/numSamples_201411262023_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_LocalREPS/numSamples_201411291500_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_LocalREPS/numSamples_201412021901_01/eval001/trial001/trial.mat')

%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_LocalREPS/numSamples_201411291420_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_LocalREPS/numSamples_201411291500_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_LocalREPS/numSamples_201412012055_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_LocalREPS/numSamples_201412032234_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarReaching_TrajectoryBased_REPSwithbounding/numSamples_201412111641_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarReaching_TrajectoryBased_REPSwithbounding/numSamples_201412111509_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarReaching_TrajectoryBased_CMA/numSamples_201412091925_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarReaching_TrajectoryBased_NES/numSamples_201412111912_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarReaching_TrajectoryBased_CMA/numSamples_201412091924_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_ShrinkageRepsVsShrinkagePower/numSamples_201502201747_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_ShrinkageRepsVsShrinkagePower/numSamples_201502201747_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_RepsVsPower/numSamples_201502201746_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarReaching_TrajectoryBased_REPSwithbounding/numSamples_201412111509_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarReaching_TrajectoryBased_CMA/numSamples_201412091925_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_RepsVsPowerWithOutShrunk/numSamples_201502201509_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarReaching_TrajectoryBased_NES/numSamples_201412111912_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarReaching_TrajectoryBased_CMA/numSamples_201412091924_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_RepsVsPowerWithoutShrunk/numSamples_201502191507_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_RepsVsPowerWithoutShrunk/numSamples_201502191718_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_RepsVsPowerWithShrunk/numSamples_201502191718_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_RepsVsPowerWithoutShrunk/numSamples_201502191718_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_ShrinkageRepsVsShrinkagePower/numSamples_201502211505_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_RepsVsPower/numSamples_201502211510_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_ShrinkageRepsVsShrinkagePower/numSamples_201502211940_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_ShrinkageRepsVsShrinkagePower/numSamples_201502211940_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_RepsVsPower/numSamples_201502212025_01/eval001/trial001/trial.mat')
%load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_ShrinkageRepsVsShrinkagePower/numSamples_201502211940_01/eval001/trial002/trial.mat')

load('/home/fcportugal/policysearchtoolboxgerichange/policysearchtoolbox/+Experiments/data/test/PlanarReaching_TrajectoryBased_MOREholeReaching_ImportanceSamplingPreProc/numSamples_201506061947_01/eval001/trial001/trial.mat')


% a = trial.parameterPolicy.policy.getExpectation(1,0.6);
% load('/home/fcportugal/data/test/PlanarHoleReaching_TrajectoryBased_LocalREPS/numSamples_201411291322_01/eval001/trial001/trial.mat')
% b = trial.parameterPolicy.policy.getExpectation(1,0.6);

contexts =[2];
%contexts = 0.6 * ones(1,2);
parameters = [];

% for lambda = 0 :0.005:1
% 
%     newTheta = lambda*a + (1-lambda)*b;
%     parameters = [parameters;newTheta]
%     
% end




%state = data.getDataEntry('states');

%data.copyValuesFromDataStructure(iterationData);

%Plotter.PlotterData.plotTrajectoriesMeanAndStd(data, 'endEffPositions', 1:2)



close all;
holeRadius =0.15;
holeDepth = 1;

groundoffset = -0.01;
context = 2;
% R = data.getDataEntry('returns');
% 
% [I B]=sort(R);
% B = flip(B);
% %animate the robot
% C = B(1:20);

    


%R = data.getDataEntry('returns');

%plot(R) ;


for i =1:10 %size(contexts,2)


%context = contexts(i);  
numSamples = 10;

%trial.dataManager.setRange('ViaPointContext',context,context);
data =  trial.dataManager.getDataObject(0);
%numSamples = size(parameters,1);
trial.sampler.numSamples = numSamples;

trial.sampler.createSamples(data);
close all;
trajectoryIndex = 1;
figure(2)
trial.planarKinematics.animate(data.getDataEntry('jointPositions',trajectoryIndex ))
hold all

a = [-5,groundoffset;context-holeRadius,groundoffset;context-holeRadius,-holeDepth+groundoffset;context+holeRadius,-holeDepth+groundoffset;context+holeRadius,0+groundoffset;5,groundoffset];
aComplex = complex(a(:,1),a(:,2));

plot(aComplex,'-xr')
%plot(1,1,'-xr','MarkerSize',20)
reward = data.getDataEntry('returns',trajectoryIndex )
title(sprintf('Method:shrinkageReps,REWARD: %g ',reward),'FontWeight', 'bold');
%trajectoryContex = data.getDataEntry('contexts',trajectoryIndex );
%title(sprintf('CONTEXT : %g, REWARD: %g ', trajectoryContex,reward),'FontWeight', 'bold');

%Plotter.plot2svg(sprintf('localRepsRepspolicyPosture750Sample%gContext%g.svg', trajectoryIndex,trajectoryContex), gcf);
Plotter.plot2svg('shrinkageReps.svg', gcf);

end
% 
% plot(context-holeRadius,0,'-xr')
% plot(context+holeRadius,0,'-xr')
% plot(context+holeRadius,-holeDepth,'-xr')
% plot(context-holeRadius,-holeDepth,'-xr')


%plot trajecoty distribution (endEffector)

%Plotter.PlotterData.plotTrajectoriesMeanAndStd(data, 'endEffPositions', 1:2)